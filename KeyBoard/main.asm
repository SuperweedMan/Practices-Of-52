;综合多分支转移
		ORG 0000H
		LJMP MAIN
MAIN:	MOV SP ,#60H
LOOP:	MOV P0,#0FH ;初始化键盘
		MOV A,P0
		CJNE A,#0FH,STEP1
		SJMP LOOP
STEP1:	LCALL DELAY
		MOV A,P0
		CJNE A,#0FH,STEP2
		SJMP LOOP
STEP2:	MOV R2,#4 ;循环四次
		SETB C
STEP3:	RRC A
		JNC STEP4
		DJNZ R2,STEP3
		LJMP LOOP  ;错误处理
STEP4:	MOV A,#5
		SUBB A,R2
		MOV 30H,A ;将行数放到30H
		MOV R2,#4
		MOV P0,#0F0H
		MOV A,P0
		SETB C
STEP5:	RLC A
		JNC STEP6
		DJNZ R2,STEP5
		LJMP LOOP
STEP6:	MOV 31H,R2 ;把列数放到31H
		
		MOV A,30H
		SUBB A,#1
		MOV B,#4
		MUL AB
		ADD A,31H
		MOV P1,A
HERE:	MOV A,P0
		CJNE A,#0F0H,HERE
		LCALL DELAY
		LJMP LOOP
		
DELAY:	PUSH 30H
		PUSH 31H
		MOV 30H,#20
DELAY1:	MOV 31H,#249
		DJNZ 31H,$
		DJNZ 30H,DELAY1
		POP 31H
		POP 30H
		RET
		
		END